function cov_1ddvwn39tf() {
  var path = "C:\\Users\\juraj\\naty\\2\\ToolJet-develop-2\\frontend\\src\\_hooks\\use-shortcuts.jsx";
  var hash = "fd074c6088d443ce367a4b29c36d8ed626acdee8";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "C:\\Users\\juraj\\naty\\2\\ToolJet-develop-2\\frontend\\src\\_hooks\\use-shortcuts.jsx",
    statementMap: {
      "0": {
        start: {
          line: 7,
          column: 21
        },
        end: {
          line: 47,
          column: 1
        }
      },
      "1": {
        start: {
          line: 8,
          column: 21
        },
        end: {
          line: 8,
          column: 52
        }
      },
      "2": {
        start: {
          line: 9,
          column: 32
        },
        end: {
          line: 19,
          column: 3
        }
      },
      "3": {
        start: {
          line: 10,
          column: 23
        },
        end: {
          line: 10,
          column: 28
        }
      },
      "4": {
        start: {
          line: 12,
          column: 4
        },
        end: {
          line: 18,
          column: 5
        }
      },
      "5": {
        start: {
          line: 13,
          column: 22
        },
        end: {
          line: 13,
          column: 50
        }
      },
      "6": {
        start: {
          line: 15,
          column: 6
        },
        end: {
          line: 15,
          column: 70
        }
      },
      "7": {
        start: {
          line: 17,
          column: 6
        },
        end: {
          line: 17,
          column: 19
        }
      },
      "8": {
        start: {
          line: 20,
          column: 20
        },
        end: {
          line: 20,
          column: 106
        }
      },
      "9": {
        start: {
          line: 20,
          column: 36
        },
        end: {
          line: 20,
          column: 106
        }
      },
      "10": {
        start: {
          line: 20,
          column: 93
        },
        end: {
          line: 20,
          column: 105
        }
      },
      "11": {
        start: {
          line: 21,
          column: 27
        },
        end: {
          line: 21,
          column: 60
        }
      },
      "12": {
        start: {
          line: 22,
          column: 21
        },
        end: {
          line: 22,
          column: 66
        }
      },
      "13": {
        start: {
          line: 22,
          column: 47
        },
        end: {
          line: 22,
          column: 64
        }
      },
      "14": {
        start: {
          line: 23,
          column: 22
        },
        end: {
          line: 23,
          column: 31
        }
      },
      "15": {
        start: {
          line: 25,
          column: 4
        },
        end: {
          line: 25,
          column: 45
        }
      },
      "16": {
        start: {
          line: 25,
          column: 38
        },
        end: {
          line: 25,
          column: 45
        }
      },
      "17": {
        start: {
          line: 26,
          column: 4
        },
        end: {
          line: 26,
          column: 45
        }
      },
      "18": {
        start: {
          line: 27,
          column: 4
        },
        end: {
          line: 29,
          column: 5
        }
      },
      "19": {
        start: {
          line: 28,
          column: 6
        },
        end: {
          line: 28,
          column: 25
        }
      },
      "20": {
        start: {
          line: 32,
          column: 4
        },
        end: {
          line: 32,
          column: 48
        }
      },
      "21": {
        start: {
          line: 35,
          column: 4
        },
        end: {
          line: 35,
          column: 24
        }
      },
      "22": {
        start: {
          line: 37,
          column: 2
        },
        end: {
          line: 46,
          column: 25
        }
      },
      "23": {
        start: {
          line: 38,
          column: 4
        },
        end: {
          line: 38,
          column: 53
        }
      },
      "24": {
        start: {
          line: 39,
          column: 4
        },
        end: {
          line: 39,
          column: 46
        }
      },
      "25": {
        start: {
          line: 40,
          column: 4
        },
        end: {
          line: 40,
          column: 50
        }
      },
      "26": {
        start: {
          line: 41,
          column: 4
        },
        end: {
          line: 45,
          column: 6
        }
      },
      "27": {
        start: {
          line: 42,
          column: 6
        },
        end: {
          line: 42,
          column: 58
        }
      },
      "28": {
        start: {
          line: 43,
          column: 6
        },
        end: {
          line: 43,
          column: 51
        }
      },
      "29": {
        start: {
          line: 44,
          column: 6
        },
        end: {
          line: 44,
          column: 55
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 7,
            column: 21
          },
          end: {
            line: 7,
            column: 22
          }
        },
        loc: {
          start: {
            line: 7,
            column: 47
          },
          end: {
            line: 47,
            column: 1
          }
        },
        line: 7
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 9,
            column: 32
          },
          end: {
            line: 9,
            column: 33
          }
        },
        loc: {
          start: {
            line: 9,
            column: 43
          },
          end: {
            line: 19,
            column: 3
          }
        },
        line: 9
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 20,
            column: 20
          },
          end: {
            line: 20,
            column: 21
          }
        },
        loc: {
          start: {
            line: 20,
            column: 36
          },
          end: {
            line: 20,
            column: 106
          }
        },
        line: 20
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 20,
            column: 86
          },
          end: {
            line: 20,
            column: 87
          }
        },
        loc: {
          start: {
            line: 20,
            column: 93
          },
          end: {
            line: 20,
            column: 105
          }
        },
        line: 20
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 22,
            column: 38
          },
          end: {
            line: 22,
            column: 39
          }
        },
        loc: {
          start: {
            line: 22,
            column: 47
          },
          end: {
            line: 22,
            column: 64
          }
        },
        line: 22
      },
      "5": {
        name: "onKeyPressed",
        decl: {
          start: {
            line: 24,
            column: 11
          },
          end: {
            line: 24,
            column: 23
          }
        },
        loc: {
          start: {
            line: 24,
            column: 31
          },
          end: {
            line: 30,
            column: 3
          }
        },
        line: 24
      },
      "6": {
        name: "onKeyUp",
        decl: {
          start: {
            line: 31,
            column: 11
          },
          end: {
            line: 31,
            column: 18
          }
        },
        loc: {
          start: {
            line: 31,
            column: 26
          },
          end: {
            line: 33,
            column: 3
          }
        },
        line: 31
      },
      "7": {
        name: "onWindowBlur",
        decl: {
          start: {
            line: 34,
            column: 11
          },
          end: {
            line: 34,
            column: 23
          }
        },
        loc: {
          start: {
            line: 34,
            column: 26
          },
          end: {
            line: 36,
            column: 3
          }
        },
        line: 34
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 37,
            column: 12
          },
          end: {
            line: 37,
            column: 13
          }
        },
        loc: {
          start: {
            line: 37,
            column: 18
          },
          end: {
            line: 46,
            column: 3
          }
        },
        line: 37
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 41,
            column: 11
          },
          end: {
            line: 41,
            column: 12
          }
        },
        loc: {
          start: {
            line: 41,
            column: 17
          },
          end: {
            line: 45,
            column: 5
          }
        },
        line: 41
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 12,
            column: 4
          },
          end: {
            line: 18,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 12,
            column: 4
          },
          end: {
            line: 18,
            column: 5
          }
        }, {
          start: {
            line: 12,
            column: 4
          },
          end: {
            line: 18,
            column: 5
          }
        }],
        line: 12
      },
      "1": {
        loc: {
          start: {
            line: 12,
            column: 8
          },
          end: {
            line: 12,
            column: 32
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 12,
            column: 8
          },
          end: {
            line: 12,
            column: 14
          }
        }, {
          start: {
            line: 12,
            column: 18
          },
          end: {
            line: 12,
            column: 32
          }
        }],
        line: 12
      },
      "2": {
        loc: {
          start: {
            line: 15,
            column: 13
          },
          end: {
            line: 15,
            column: 69
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 15,
            column: 13
          },
          end: {
            line: 15,
            column: 41
          }
        }, {
          start: {
            line: 15,
            column: 45
          },
          end: {
            line: 15,
            column: 69
          }
        }],
        line: 15
      },
      "3": {
        loc: {
          start: {
            line: 20,
            column: 36
          },
          end: {
            line: 20,
            column: 106
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 20,
            column: 36
          },
          end: {
            line: 20,
            column: 59
          }
        }, {
          start: {
            line: 20,
            column: 63
          },
          end: {
            line: 20,
            column: 106
          }
        }],
        line: 20
      },
      "4": {
        loc: {
          start: {
            line: 21,
            column: 49
          },
          end: {
            line: 21,
            column: 59
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 21,
            column: 49
          },
          end: {
            line: 21,
            column: 53
          }
        }, {
          start: {
            line: 21,
            column: 57
          },
          end: {
            line: 21,
            column: 59
          }
        }],
        line: 21
      },
      "5": {
        loc: {
          start: {
            line: 25,
            column: 4
          },
          end: {
            line: 25,
            column: 45
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 25,
            column: 4
          },
          end: {
            line: 25,
            column: 45
          }
        }, {
          start: {
            line: 25,
            column: 4
          },
          end: {
            line: 25,
            column: 45
          }
        }],
        line: 25
      },
      "6": {
        loc: {
          start: {
            line: 27,
            column: 4
          },
          end: {
            line: 29,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 27,
            column: 4
          },
          end: {
            line: 29,
            column: 5
          }
        }, {
          start: {
            line: 27,
            column: 4
          },
          end: {
            line: 29,
            column: 5
          }
        }],
        line: 27
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "fd074c6088d443ce367a4b29c36d8ed626acdee8"
  };
  var coverage = global[gcv] || (global[gcv] = {});

  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }

  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1ddvwn39tf = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}

cov_1ddvwn39tf();

/* eslint-disable react-hooks/exhaustive-deps */
// https://keycode.info/ this cheat sheet gives info about key presses
import { useEffect, useCallback } from 'react';
cov_1ddvwn39tf().s[0]++;

const useShortcuts = (keys, callback, deps) => {
  cov_1ddvwn39tf().f[0]++;
  const ignoreTags = (cov_1ddvwn39tf().s[1]++, ['input', 'select', 'textarea']);
  cov_1ddvwn39tf().s[2]++;

  const ignoreEventsCondition = event => {
    cov_1ddvwn39tf().f[1]++;
    const {
      target
    } = (cov_1ddvwn39tf().s[3]++, event);
    cov_1ddvwn39tf().s[4]++;

    if ((cov_1ddvwn39tf().b[1][0]++, target) && (cov_1ddvwn39tf().b[1][1]++, target.tagName)) {
      cov_1ddvwn39tf().b[0][0]++;
      const tagName = (cov_1ddvwn39tf().s[5]++, target.tagName.toLowerCase());
      cov_1ddvwn39tf().s[6]++;
      return (cov_1ddvwn39tf().b[2][0]++, ignoreTags.includes(tagName)) || (cov_1ddvwn39tf().b[2][1]++, target.isContentEditable);
    } else {
      cov_1ddvwn39tf().b[0][1]++;
      cov_1ddvwn39tf().s[7]++;
      return false;
    }
  };

  cov_1ddvwn39tf().s[8]++;

  const setsEqual = (setA, setB) => {
    cov_1ddvwn39tf().f[2]++;
    cov_1ddvwn39tf().s[9]++;
    return (cov_1ddvwn39tf().b[3][0]++, setA.size === setB.size) && (cov_1ddvwn39tf().b[3][1]++, !Array.from(setA).some(v => {
      cov_1ddvwn39tf().f[3]++;
      cov_1ddvwn39tf().s[10]++;
      return !setB.has(v);
    }));
  };

  const memoizedCallback = (cov_1ddvwn39tf().s[11]++, useCallback(callback, (cov_1ddvwn39tf().b[4][0]++, deps) || (cov_1ddvwn39tf().b[4][1]++, [])));
  const targetKeys = (cov_1ddvwn39tf().s[12]++, new Set(keys.map(key => {
    cov_1ddvwn39tf().f[4]++;
    cov_1ddvwn39tf().s[13]++;
    return key.toLowerCase();
  })));
  const pressedKeys = (cov_1ddvwn39tf().s[14]++, new Set());

  function onKeyPressed(event) {
    cov_1ddvwn39tf().f[5]++;
    cov_1ddvwn39tf().s[15]++;

    if (ignoreEventsCondition(event)) {
      cov_1ddvwn39tf().b[5][0]++;
      cov_1ddvwn39tf().s[16]++;
      return;
    } else {
      cov_1ddvwn39tf().b[5][1]++;
    }

    cov_1ddvwn39tf().s[17]++;
    pressedKeys.add(event.key.toLowerCase());
    cov_1ddvwn39tf().s[18]++;

    if (setsEqual(pressedKeys, targetKeys)) {
      cov_1ddvwn39tf().b[6][0]++;
      cov_1ddvwn39tf().s[19]++;
      memoizedCallback();
    } else {
      cov_1ddvwn39tf().b[6][1]++;
    }
  }

  function onKeyUp(event) {
    cov_1ddvwn39tf().f[6]++;
    cov_1ddvwn39tf().s[20]++;
    pressedKeys.delete(event.key.toLowerCase());
  }

  function onWindowBlur() {
    cov_1ddvwn39tf().f[7]++;
    cov_1ddvwn39tf().s[21]++;
    pressedKeys.clear();
  }

  cov_1ddvwn39tf().s[22]++;
  useEffect(() => {
    cov_1ddvwn39tf().f[8]++;
    cov_1ddvwn39tf().s[23]++;
    window.addEventListener('keydown', onKeyPressed);
    cov_1ddvwn39tf().s[24]++;
    window.addEventListener('keyup', onKeyUp);
    cov_1ddvwn39tf().s[25]++;
    window.addEventListener('blur', onWindowBlur);
    cov_1ddvwn39tf().s[26]++;
    return () => {
      cov_1ddvwn39tf().f[9]++;
      cov_1ddvwn39tf().s[27]++;
      window.removeEventListener('keydown', onKeyPressed);
      cov_1ddvwn39tf().s[28]++;
      window.removeEventListener('keyup', onKeyUp);
      cov_1ddvwn39tf().s[29]++;
      window.removeEventListener('blur', onWindowBlur);
    };
  }, [memoizedCallback]);
};

export default useShortcuts;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZS1zaG9ydGN1dHMuanN4Il0sIm5hbWVzIjpbInVzZUVmZmVjdCIsInVzZUNhbGxiYWNrIiwidXNlU2hvcnRjdXRzIiwia2V5cyIsImNhbGxiYWNrIiwiZGVwcyIsImlnbm9yZVRhZ3MiLCJpZ25vcmVFdmVudHNDb25kaXRpb24iLCJldmVudCIsInRhcmdldCIsInRhZ05hbWUiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiaXNDb250ZW50RWRpdGFibGUiLCJzZXRzRXF1YWwiLCJzZXRBIiwic2V0QiIsInNpemUiLCJBcnJheSIsImZyb20iLCJzb21lIiwidiIsImhhcyIsIm1lbW9pemVkQ2FsbGJhY2siLCJ0YXJnZXRLZXlzIiwiU2V0IiwibWFwIiwia2V5IiwicHJlc3NlZEtleXMiLCJvbktleVByZXNzZWQiLCJhZGQiLCJvbktleVVwIiwiZGVsZXRlIiwib25XaW5kb3dCbHVyIiwiY2xlYXIiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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QUFBO0FBQUE7QUFDdENELE1BQUFBLGdCQUFnQjtBQUNqQixLQUZEO0FBQUE7QUFBQTtBQUdEOztBQUNELFdBQVNRLE9BQVQsQ0FBaUJ2QixLQUFqQixFQUF3QjtBQUFBO0FBQUE7QUFDdEJvQixJQUFBQSxXQUFXLENBQUNJLE1BQVosQ0FBbUJ4QixLQUFLLENBQUNtQixHQUFOLENBQVVoQixXQUFWLEVBQW5CO0FBQ0Q7O0FBQ0QsV0FBU3NCLFlBQVQsR0FBd0I7QUFBQTtBQUFBO0FBQ3RCTCxJQUFBQSxXQUFXLENBQUNNLEtBQVo7QUFDRDs7QUE3QjRDO0FBOEI3Q2xDLEVBQUFBLFNBQVMsQ0FBQyxNQUFNO0FBQUE7QUFBQTtBQUNkbUMsSUFBQUEsTUFBTSxDQUFDQyxnQkFBUCxDQUF3QixTQUF4QixFQUFtQ1AsWUFBbkM7QUFEYztBQUVkTSxJQUFBQSxNQUFNLENBQUNDLGdCQUFQLENBQXdCLE9BQXhCLEVBQWlDTCxPQUFqQztBQUZjO0FBR2RJLElBQUFBLE1BQU0sQ0FBQ0MsZ0JBQVAsQ0FBd0IsTUFBeEIsRUFBZ0NILFlBQWhDO0FBSGM7QUFJZCxXQUFPLE1BQU07QUFBQTtBQUFBO0FBQ1hFLE1BQUFBLE1BQU0sQ0FBQ0UsbUJBQVAsQ0FBMkIsU0FBM0IsRUFBc0NSLFlBQXRDO0FBRFc7QUFFWE0sTUFBQUEsTUFBTSxDQUFDRSxtQkFBUCxDQUEyQixPQUEzQixFQUFvQ04sT0FBcEM7QUFGVztBQUdYSSxNQUFBQSxNQUFNLENBQUNFLG1CQUFQLENBQTJCLE1BQTNCLEVBQW1DSixZQUFuQztBQUNELEtBSkQ7QUFLRCxHQVRRLEVBU04sQ0FBQ1YsZ0JBQUQsQ0FUTSxDQUFUO0FBVUQsQ0F4Q0Q7O0FBMENBLGVBQWVyQixZQUFmIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzICovXG5cbi8vIGh0dHBzOi8va2V5Y29kZS5pbmZvLyB0aGlzIGNoZWF0IHNoZWV0IGdpdmVzIGluZm8gYWJvdXQga2V5IHByZXNzZXNcblxuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcblxuY29uc3QgdXNlU2hvcnRjdXRzID0gKGtleXMsIGNhbGxiYWNrLCBkZXBzKSA9PiB7XG4gIGNvbnN0IGlnbm9yZVRhZ3MgPSBbJ2lucHV0JywgJ3NlbGVjdCcsICd0ZXh0YXJlYSddO1xuICBjb25zdCBpZ25vcmVFdmVudHNDb25kaXRpb24gPSAoZXZlbnQpID0+IHtcbiAgICBjb25zdCB7IHRhcmdldCB9ID0gZXZlbnQ7XG5cbiAgICBpZiAodGFyZ2V0ICYmIHRhcmdldC50YWdOYW1lKSB7XG4gICAgICBjb25zdCB0YWdOYW1lID0gdGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcblxuICAgICAgcmV0dXJuIGlnbm9yZVRhZ3MuaW5jbHVkZXModGFnTmFtZSkgfHwgdGFyZ2V0LmlzQ29udGVudEVkaXRhYmxlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuICBjb25zdCBzZXRzRXF1YWwgPSAoc2V0QSwgc2V0QikgPT4gc2V0QS5zaXplID09PSBzZXRCLnNpemUgJiYgIUFycmF5LmZyb20oc2V0QSkuc29tZSgodikgPT4gIXNldEIuaGFzKHYpKTtcbiAgY29uc3QgbWVtb2l6ZWRDYWxsYmFjayA9IHVzZUNhbGxiYWNrKGNhbGxiYWNrLCBkZXBzIHx8IFtdKTtcbiAgY29uc3QgdGFyZ2V0S2V5cyA9IG5ldyBTZXQoa2V5cy5tYXAoKGtleSkgPT4ga2V5LnRvTG93ZXJDYXNlKCkpKTtcbiAgY29uc3QgcHJlc3NlZEtleXMgPSBuZXcgU2V0KCk7XG4gIGZ1bmN0aW9uIG9uS2V5UHJlc3NlZChldmVudCkge1xuICAgIGlmIChpZ25vcmVFdmVudHNDb25kaXRpb24oZXZlbnQpKSByZXR1cm47XG4gICAgcHJlc3NlZEtleXMuYWRkKGV2ZW50LmtleS50b0xvd2VyQ2FzZSgpKTtcbiAgICBpZiAoc2V0c0VxdWFsKHByZXNzZWRLZXlzLCB0YXJnZXRLZXlzKSkge1xuICAgICAgbWVtb2l6ZWRDYWxsYmFjaygpO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBvbktleVVwKGV2ZW50KSB7XG4gICAgcHJlc3NlZEtleXMuZGVsZXRlKGV2ZW50LmtleS50b0xvd2VyQ2FzZSgpKTtcbiAgfVxuICBmdW5jdGlvbiBvbldpbmRvd0JsdXIoKSB7XG4gICAgcHJlc3NlZEtleXMuY2xlYXIoKTtcbiAgfVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25LZXlQcmVzc2VkKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBvbktleVVwKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIG9uV2luZG93Qmx1cik7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25LZXlQcmVzc2VkKTtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIG9uS2V5VXApO1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JsdXInLCBvbldpbmRvd0JsdXIpO1xuICAgIH07XG4gIH0sIFttZW1vaXplZENhbGxiYWNrXSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB1c2VTaG9ydGN1dHM7XG4iXX0=